    <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agregar nuevo libro</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Lexend:wght@100;300;400;500;600;700;800;900&display=swap");
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Lexend", sans-serif;
      }
      
    </style>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.1/flowbite.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
        
    <div style="margin: 20px">
      <h1
        onclick="home()"
        style="text-align: center; cursor: pointer;"
        class="text-3xl font-bold tracking-tight text-gray-900"
      >
      wiki español Administrador
      </h1>
      <div
        id="alert"
        class="p-4 mb-4 mt-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
        role="alert"
      ></div>
      <div id="success" class="p-4 mt-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400" role="alert">
        <span class="font-medium">¡Alerta de éxito!</span> Cambie algunas cosas e intente enviar nuevamente.
      </div>
      <label
        for="default-input"
        class="block mb-2 mt-6 text-sm font-medium text-gray-900 dark:text-white"
        >
        Ingrese el título</label
      >
      <input
        type="text"
        id="title"
        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
      />
      <label
        for="default-input"
        class="block mb-2 mt-6 text-sm font-medium text-gray-900 dark:text-white"
        >Introduzca el nombre del autor</label
      >
      <input
        type="text"
        id="author"
        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
      />
      <label
        for="title"
        class="block mb-2 mt-6 text-sm font-medium text-gray-900 dark:text-white"
        >Seleccione un género</label
      >
      <select
        id="sel"
        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
      >
        <option value="categ">Elige un género</option>
      </select>
      <label
        for="message"
        class="block mb-2 mt-6 text-sm font-medium text-gray-900 dark:text-white"
        >Agregar nuevo genero</label
      >
        <input
        type="text"
        id="sel-2"
        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
      />
      <label
        for="message"
        class="block mb-2 mt-6 text-sm font-medium text-gray-900 dark:text-white"
        >Your Content</label
      >
      <textarea
        id="content"
        rows="4"
        class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
        placeholder="Escribe tu libro aquí..."
      ></textarea>
      <button
        type="button"
        onclick="add()"
        class="mt-6 text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-700 dark:border-gray-700"
      >
      Agregar
      </button>
    </div>
    <script>
          function home() {
        window.location.replace("/admin/yahyasaad");
      }
      async function genre() {
        const data = await fetch("/book/genre", {
          method: "GET",
          headers: {
            "Content-Type": "application/json",
          },
        });
        const e = await data.json();
        e.msg.map((e, i) => {
          document.getElementById("sel").innerHTML += `
                <option class="opt" value=${e}>${e}</option>
                  `;
        });
      }
      genre();

      document.getElementById("alert").style.display = "none";
      document.getElementById("success").style.display = "none";
      async function add() {
        const title = document.getElementById("title").value;
        const content = document.getElementById("content").value;
        let genre = document.getElementById("sel").value;
        const author = document.getElementById("author").value;
        if (genre ==  "categ"){
            genre = document.getElementById("sel-2").value
        }
        genre = genre.toUpperCase()
        if (title == "" || content == "" || author == "") {
          document.getElementById("alert").style.display = null;
          document.getElementById("alert").innerHTML = `
            <span class="font-medium">Please fill all the details!</span> 
                `;
        } else {
          const send = await fetch("/admin/addbook", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ title, content, genre,author }),
          });
          const res = await send.json();
          console.log(res)
          if (res.msg == "SMO") {
            document.getElementById("alert").style.display = null;
            document.getElementById("alert").innerHTML = `
    
            <span class="font-medium">Something went wrong!</span> 
                `;
          } else {
            document.getElementById("success").style.display = null;
            document.getElementById("success").innerHTML = `
    
            <span class="font-medium">Added Successfully</span> 
                `;
          }
        }
      }
    </script>
  </body>
</html>
